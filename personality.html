<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>말티즈 성격</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f3f3f3;
        }
        .ca0 {
            position: absolute;
            top: 7%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        .book-container {
            display: flex;
            height: 60vh;
            width: 60vw;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            perspective: 1500px; /* 3D 회전을 위한 원근감 */
        }

        .left-section {
            flex: 0 0 50%;
            position: relative;
            background-color: #ddd;
        }

        .left-section img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .right-section-container {
            flex: 0 0 50%;
            position: relative;
            transform-origin: left center; /* 왼쪽을 기준으로 회전 */
            transform-style: preserve-3d;
        }

        .right-section {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* 뒷면 숨기기 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0px;
            background-color: #fff;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            transform-origin: left; /* 왼쪽 축 기준 회전 */
            transition: transform 1s ease-in-out;
            transform: rotateY(90deg); /* 기본적으로 오른쪽에 위치 */
        }

        .right-section.active {
            transform: rotateY(0); /* 활성화된 페이지는 정면 */
        }

        .right-section.previous {
            transform: rotateY(-90deg); /* 이전 페이지는 왼쪽으로 이동 */
        }

        .right-section h1 {
            font-size: 20pt;
            margin-left: 30pt;
            color: #333;
        }

        .right-section p {
            font-size: 12pt;
            margin-left: 30pt;
            line-height: 1.5;
            color: #555;
        }

        .controls {
            position: absolute;
            bottom: 60px;
            display: flex;
            gap: 30px;
        }

        .controls button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            background-color: #333;
            color: #fff;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .controls button:hover {
            background-color: #555;
        }

        .controls button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        .arrow.left {
            width: 60px;
            margin-right: 70px;
            cursor: pointer; /* 마우스 커서를 손가락 모양으로 변경 */
        }

        .arrow.right {
            width: 60px;
            margin-left: 70px;
            cursor: pointer; /* 마우스 커서를 손가락 모양으로 변경 */
        }

        .arrow img {
            width: 100%;
            height: 100%;
        }

        .arrow.disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        .copy {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 15pt;
            color: #a5a5a5;
            animation: flash 1.5s infinite alternate;
        }

        .footprint {
            position: fixed;
            pointer-events: none;
            width: 40px;
            height: 40px;
            opacity: 0.7;
            transition: opacity 3s;
            margin: 10px; /* 발자국 주변 여백 추가 */
            }
        .footprint img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* 반응형 디자인 */
        @media screen and (max-width: 768px) {
            .book-container {
                flex-direction: column;
                height: 40vh;
                width: 60vw;
            }

            .left-section img{
                height: 100%;
            }

            .left-section {
                flex: 0 0 50;
                height: 50%;
                position: relative;
            }
            .right-section-container {
                position: relative;
                font-size: 12px;
            }

            .arrow.left {
                margin-right: 15px;
                width: 30px;
            }

            .arrow.right {
                margin-left: 15px;
                width: 30px;
            }

            .right-section h1 {
                font-size: 18px;
                margin-left: 10px;
            }
            .right-section p {
                font-size: 10px;
                margin-left: 10px;
            }
            .copy {
                font-size: 10pt;
                margin-bottom: 10%;
            }
        }
    </style>
</head>
<body>
    <div class="ca0">
        <a href="index.html">
            <img src="img/dog_house2.svg" width="59"alt="ca0">
        </a>
    </div>
    <div class="arrow left" id="prev">
        <img src="img/foot2.png" alt="이전">
    </div>
    <div class="book-container">
        <div class="left-section">
            <img id="leftImage" src="img/m4.jpg" alt="왼쪽 이미지">
        </div>
        
        <div class="right-section-container">
            <div id="page1" class="right-section active">
                <h1>말티즈 성격</h1>
                <p>말티즈는 참지않긔, 말티즈는 자기 주장이 강하고 고집이 센 견종으로<br>
                    자신이 원하는 것을 적극적으로 표현합니다.<br>
                    <br>
                    이때 억압하거나 스트레스를 주게 되면<br>
                    공격적인 행동을 보이면 보호자와의 관계도 안 좋아질 수 있습니다.<br>
                    <br>
                    넓은 마음과 인내심을 가지고 훈련하는 것이 필요합니다.
                </p>
            </div>
            <div id="page2" class="right-section">
                <h1>이 구역 1순위 말티즈</h1>
                <p>말티즈는 자신을 보호하려는 방어욕구가 강한 편입니다.<br>
                    그래서 다른 강아지를 만나거나 낯선 곳에서<br>
                    공격성을 보이거나 도망가고는 합니다.<br>
                    <br>
                    또 사회화 훈련과 리더십 훈련이 제대로 되지 않았다면<br>
                    보호자를 향해 짖거나 무는 행동을 할 수 있습니다.
                </p>
            </div>
            <div id="page3" class="right-section">
                <h1>질투와 애교</h1>
                <p>가족의 사랑을 필요로 하는 편이기 때문에 가족의 관심이 없어지고<br>
                    새로운 반려견을 입양하면 질투를 보일 수 있습니다.<br>
                    <br>
                    또 사람을 좋아하고 애교도 많아, 가족의 사랑을 독차지하는<br>
                    어린 아이에게 적대적인 모습을 보일 수도 있으니<br>
                    아이가 있는 가정에서는 주의가 필요합니다.
                </p>
            </div>

        </div>
    </div>
    
    <div class="arrow right" id="next">
        <img src="img/foot2.png" alt="다음">
    </div>

    <div class="copy">말티즈의 발을 클릭해주세요.</div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const pages = document.querySelectorAll(".right-section");
            const prevButton = document.getElementById("prev");
            const nextButton = document.getElementById("next");
            const leftImage = document.getElementById("leftImage");
            const images = ["img/m4.jpg", "img/m5.jpg", "img/m6.jpg"]; // 페이지별 이미지

            let currentPage = 0;

            const updatePage = () => {
                pages.forEach((page, index) => {
                    if (index < currentPage) {
                        page.classList.add("previous");
                        page.classList.remove("active");
                    } else if (index === currentPage) {
                        page.classList.add("active");
                        page.classList.remove("previous");
                    } else {
                        page.classList.remove("active");
                        page.classList.remove("previous");
                    }
                });

                prevButton.disabled = currentPage === 0;
                nextButton.disabled = currentPage === pages.length - 1;
            };

            const changeImageAfterAnimation = () => {
                leftImage.src = images[currentPage];
            };

            nextButton.addEventListener("click", () => {
                if (currentPage < pages.length - 1) {
                    currentPage++;
                    updatePage();

                    // 이미지 변경은 애니메이션 종료 후 실행
                    document.querySelector(".right-section-container").addEventListener(
                        "transitionend",
                        changeImageAfterAnimation,
                        { once: true }
                    );
                }
            });

            prevButton.addEventListener("click", () => {
                if (currentPage > 0) {
                    currentPage--;
                    updatePage();

                    // 이미지 변경은 애니메이션 종료 후 실행
                    document.querySelector(".right-section-container").addEventListener(
                        "transitionend",
                        changeImageAfterAnimation,
                        { once: true }
                    );
                }
            });

            // 초기 페이지 설정
            updatePage();
        });
        //마우스
        document.addEventListener('DOMContentLoaded', () => {
            const sections = [
                { element: document.querySelector('.R2'), text: document.querySelector('.t2') },
                { element: document.querySelector('.R3'), text: document.querySelector('.t3') },
            ];
            let currentSection = 0;
            let isScrolling = false;

            const lockScroll = () => {
                isScrolling = true;
                setTimeout(() => {
                    isScrolling = false;
                }, 1000); // 1초 동안 스크롤 락
            };

            const showSection = (index) => {
                if (index < sections.length) {
                    sections[index].element.style.opacity = "1";
                    sections[index].text.style.opacity = "1";
                    sections[index].element.style.transform = "translateY(0)";
                    sections[index].text.style.transform = "translateY(0)";
                }
            };

            document.addEventListener('scroll', () => {
                if (isScrolling) return;

                const scrollY = window.scrollY;
                if (currentSection < sections.length) {
                    const triggerPoint = window.innerHeight * (currentSection + 1); // 각 섹션의 표시 지점
                    if (scrollY > triggerPoint) {
                        lockScroll();
                        showSection(currentSection);
                        currentSection++;
                    }
                }
            });

            // 초기 상태 숨기기
            sections.forEach((section) => {
                section.element.style.opacity = "0";
                section.text.style.opacity = "0";
                section.element.style.transform = "translateY(50px)";
                section.text.style.transform = "translateY(50px)";
                section.element.style.transition = "opacity 0.5s, transform 0.5s";
                section.text.style.transition = "opacity 0.5s, transform 0.5s";
            });
        });

            let lastX = 0;
            let lastY = 0;
            const minDistance = 40; // 발자국 사이 최소 거리
        
            document.addEventListener('mousemove', function(e) {
            // 이전 위치와의 거리 계산
            const distance = Math.sqrt(
                Math.pow(e.clientX - lastX, 2) + 
                Math.pow(e.clientY - lastY, 2)
            );
        
            // 최소 거리보다 멀어졌을 때만 새 발자국 생성
            if (distance > minDistance) {
                const footprint = document.createElement('div');
                footprint.classList.add('footprint');
                footprint.style.left = (e.clientX - 15) + 'px';
                footprint.style.top = (e.clientY - 15) + 'px';
                footprint.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                const img = document.createElement('img');
                img.src = 'img/foot2.png';
                footprint.appendChild(img);
                
                document.body.appendChild(footprint);
        
                setTimeout(() => {
                footprint.style.opacity = '0';
                }, 300);
        
                setTimeout(() => {
                document.body.removeChild(footprint);
                }, 3300);
        
                // 현재 위치를 마지막 위치로 저장
                lastX = e.clientX;
                lastY = e.clientY;
            }
            });
    </script>
</body>
</html>
